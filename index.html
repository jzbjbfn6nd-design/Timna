<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        body { margin: 0; background: #fff; overflow: hidden; }
        #viewer-container { position: relative; width: 100vw; height: 100vh; }
        
        .Hotspot { 
            background: #fff; border-radius: 50%; border: 2px solid #000; 
            width: 12px; height: 12px; cursor: pointer; 
        }
        .HotspotAnnotation { 
            background: rgba(255, 255, 255, 0.9); border-radius: 4px; color: #333; 
            font-family: sans-serif; font-size: 10px; padding: 2px 6px;
            position: absolute; transform: translate(12px, -50%); opacity: 0; transition: opacity 0.3s;
            pointer-events: none; white-space: nowrap;
        }
        .Hotspot:hover .HotspotAnnotation { opacity: 1; }

        #back-btn { 
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            padding: 12px 24px; background: #000; color: #fff; border-radius: 30px; 
            display: none; cursor: pointer; z-index: 10; font-family: sans-serif; border: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>

<div id="viewer-container">
    <model-viewer id="viewer" 
        oncontextmenu="return false;"
        src="https://jzbjbfn6nd-design.github.io/Timna/timna200k-v2.glb" 
        camera-controls 
        camera-orbit="-9.6deg 77deg 400m" 
        field-of-view="25deg"
        shadow-intensity="1.17"
        exposure="1.59"
        style="width: 100%; height: 100%;">

        <button class="Hotspot" slot="hotspot-8" 
            data-position="-101.822333498233m 38.566136439359994m 42.84557070132007m" 
            onclick="loadSector('prisms-v1.glb', '184.9deg 80.25deg 110.5m')">
            <div class="HotspotAnnotation">prisms</div>
        </button>

        <button id="back-btn" onclick="loadMain()">חזרה למפה הכללית</button>
    </model-viewer>
</div>

<script>
    const viewer = document.getElementById('viewer');
    const backBtn = document.getElementById('back-btn');
    const baseUrl = "https://jzbjbfn6nd-design.github.io/Timna/";

    // חסימת קליק ימני על כל הקונטיינר ליתר ביטחון
    document.addEventListener('contextmenu', event => event.preventDefault());

    function loadSector(fileName, orbit) {
        viewer.src = baseUrl + fileName + "?v=" + Math.random();
        viewer.cameraOrbit = orbit;
        backBtn.style.display = 'block';
        
        const hotspots = document.querySelectorAll('.Hotspot');
        hotspots.forEach(h => h.style.display = 'none');
    }

    function loadMain() {
        viewer.src = baseUrl + "timna200k-v2.glb" + "?v=" + Math.random();
        viewer.cameraOrbit = "-9.6deg 77deg 400m";
        backBtn.style.display = 'none';
        
        const hotspots = document.querySelectorAll('.Hotspot');
        hotspots.forEach(h => h.style.display = 'block');
    }
</script>

</body>
</html>
